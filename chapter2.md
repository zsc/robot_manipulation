# 第2章：执行器选择与优化

执行器是机器人的"肌肉"，直接决定了系统的力矩输出、响应速度和能量效率。本章深入探讨各类执行器的工作原理、选型准则和优化策略，重点分析电机-减速器集成系统的设计权衡。我们将从电磁学基础出发，逐步深入到系统级的热管理和控制带宽优化，为后续的动力学建模和控制算法设计奠定硬件基础。

## 2.1 电机类型：永磁同步电机(PMSM) vs BLDC vs 伺服 vs 准直驱

### 2.1.1 电机基础物理

机器人执行器的核心是电磁能量转换。洛伦兹力定律给出了基本关系：

$$\mathbf{F} = q(\mathbf{v} \times \mathbf{B})$$

对于载流导体，力矩产生的基本方程为：

$$\tau = k_t \cdot I$$

其中 $k_t$ 是力矩常数，$I$ 是相电流。然而，实际电机的性能受到多个因素限制：

1. **磁饱和**：铁芯材料的 B-H 曲线非线性
2. **铜损**：$P_{copper} = I^2 R$，限制连续电流
3. **铁损**：涡流和磁滞损耗，随频率增加
4. **机械损耗**：轴承摩擦和风阻

### 2.1.2 永磁同步电机(PMSM)

PMSM 是高性能机器人的首选，具有高功率密度和效率。其特点：

- **转子结构**：表贴式(SPM)或内置式(IPM)永磁体
- **反电动势波形**：正弦波，需要矢量控制(FOC)
- **控制复杂度**：需要转子位置反馈，通常采用编码器

力矩方程（dq坐标系）：
$$\tau = \frac{3}{2}p[\lambda_m i_q + (L_d - L_q)i_d i_q]$$

其中第二项是磁阻力矩，IPM电机可利用此项提高力矩密度。

### 2.1.3 无刷直流电机(BLDC)

BLDC 与 PMSM 物理结构相似，但控制策略不同：

- **反电动势波形**：梯形波
- **控制方式**：六步换向，实现简单
- **力矩脉动**：约13%，高于PMSM的2-5%
- **成本效益**：控制器成本低，适合低成本应用

换向时序关系：
```
霍尔位置  | H1 H0 H1 | 导通相位
---------|----------|----------
  001    |  0  0  1 |  U+V-
  011    |  0  1  1 |  U+W-
  010    |  0  1  0 |  V+W-
  110    |  1  1  0 |  V+U-
  100    |  1  0  0 |  W+U-
  101    |  1  0  1 |  W+V-
```

### 2.1.4 伺服电机系统

伺服系统是电机+编码器+驱动器的集成：

- **位置反馈精度**：17-23位编码器（131072-8388608 CPR）
- **速度环带宽**：典型1-3 kHz
- **位置环带宽**：典型100-500 Hz
- **通信协议**：EtherCAT、CANopen、Modbus

伺服调参的基本步骤：
1. 电流环调节（最内环，10-20 kHz）
2. 速度环调节（1-3 kHz）
3. 位置环调节（100-500 Hz）
4. 前馈补偿优化

### 2.1.5 准直驱方案

MIT Cheetah 推广的准直驱(Quasi-Direct Drive)方案：

- **减速比**：6:1 到 10:1（远低于传统50-100:1）
- **反驱性**：优秀，可实现力控制
- **带宽**：>100 Hz力控制带宽
- **效率链**：电机效率90% × 传动效率95% ≈ 85%

关键设计参数：
$$\text{Motor Constant} = \frac{k_t}{\sqrt{R}} \propto \frac{\tau_{continuous}}{\sqrt{P_{copper}}}$$

优化目标是最大化电机常数，同时保证：
- 转动惯量匹配：$J_{motor} \cdot N^2 \approx J_{load}$
- 热容量足够：连续功率 < 散热能力

## 2.2 永磁体材料：钕铁硼 vs 钐钴

### 2.2.1 材料特性对比

永磁体是PMSM/BLDC的核心，其性能直接影响电机性能：

| 参数 | 钕铁硼(NdFeB) | 钐钴(SmCo) |
|------|--------------|------------|
| 剩余磁感应强度 $B_r$ | 1.2-1.5 T | 0.9-1.15 T |
| 矫顽力 $H_c$ | 900-2000 kA/m | 650-2000 kA/m |
| 最大磁能积 $(BH)_{max}$ | 250-450 kJ/m³ | 150-250 kJ/m³ |
| 居里温度 | 310-350°C | 720-800°C |
| 温度系数 | -0.12%/°C | -0.035%/°C |
| 耐腐蚀性 | 差，需镀层 | 优秀 |
| 成本 | 中等 | 高 |

### 2.2.2 温度特性与退磁曲线

永磁体的工作点分析至关重要。退磁曲线第二象限的斜率（回复磁导率）：

$$\mu_{rec} = \frac{B_r}{H_c}$$

温度升高导致的退磁风险：
1. **可逆退磁**：温度恢复后磁性恢复
2. **不可逆退磁**：超过拐点，永久损失
3. **完全退磁**：超过居里温度

设计安全裕度：
$$B_{operating} > B_{knee} \times 1.5$$

其中 $B_{knee}$ 是退磁曲线拐点。

### 2.2.3 磁路设计优化

Halbach阵列可提高气隙磁密：
$$B_{gap} = B_r \cdot \frac{1 - e^{-2\pi h/\lambda}}{1 + e^{-2\pi h/\lambda}}$$

其中 $h$ 是磁体厚度，$\lambda$ 是阵列周期。

## 2.3 谐波减速器原理与失效模式

### 2.3.1 工作原理

谐波减速器利用柔性元件的弹性变形传递运动：

1. **波发生器**（Wave Generator）：椭圆凸轮+柔性轴承
2. **柔轮**（Flexspline）：薄壁柔性齿轮
3. **刚轮**（Circular Spline）：刚性内齿圈

减速比计算：
$$i = \frac{Z_2 - Z_1}{Z_1}$$

其中 $Z_1$ 是柔轮齿数，$Z_2$ 是刚轮齿数。典型值：$Z_1=100$，$Z_2=102$，得 $i=50:1$。

### 2.3.2 性能特性

谐波减速器的独特优势：
- **零背隙**：<1 arcmin，优于行星齿轮
- **高减速比**：30:1 到 320:1 单级
- **扭转刚度**：非线性，随负载增加

扭转刚度模型：
$$K(\theta) = K_0 + K_1|\theta|$$

其中 $K_0$ 是初始刚度，$K_1$ 是非线性系数。

### 2.3.3 失效模式分析

主要失效模式及预防：

1. **柔轮疲劳断裂**
   - 原因：循环应力超过疲劳极限
   - 预防：控制负载，避免冲击
   - 寿命估算：$N = C \cdot (\sigma_{max})^{-b}$

2. **齿面磨损**
   - 原因：润滑不良或过载
   - 监测指标：传动误差增大
   - 预防：定期更换润滑脂

3. **波发生器轴承失效**
   - 原因：高速旋转疲劳
   - 症状：噪音增大，温升异常
   - 预防：限制输入转速 <3000 rpm

4. **共振破坏**
   - 危险频率：$f_{critical} = \frac{1}{2\pi}\sqrt{\frac{K}{J}}$
   - 预防：避开共振区间运行

## 2.4 传动系统对比：谐波 vs 行星齿轮 vs 摆线针轮

### 2.4.1 行星齿轮减速器

行星齿轮的力矩分配：
$$\tau_{out} = \tau_{in} \cdot i \cdot \eta$$

其中效率 $\eta$ 典型值95-98%。

多级串联时：
$$i_{total} = \prod_{k=1}^{n} i_k, \quad \eta_{total} = \prod_{k=1}^{n} \eta_k$$

设计要点：
- **载荷均衡**：浮动太阳轮或行星架
- **噪音控制**：斜齿轮降噪，但增加轴向力
- **背隙控制**：预紧或双联结构

### 2.4.2 摆线针轮减速器

摆线传动的独特机理：

摆线方程（参数形式）：
$$\begin{cases}
x = r(\theta - \sin\theta) \\
y = r(1 - \cos\theta)
\end{cases}$$

优势：
- **高减速比**：单级可达119:1
- **高刚度**：多齿同时啮合
- **抗冲击**：过载时打滑保护

劣势：
- **制造精度要求高**
- **输出轴偏心补偿复杂**
- **效率略低于行星齿轮**

### 2.4.3 综合对比与选型准则

| 特性 | 谐波 | 行星齿轮 | 摆线针轮 |
|-----|------|---------|----------|
| 减速比范围 | 30-320 | 3-100 | 10-119 |
| 背隙 | <1' | 3-15' | 1-3' |
| 效率 | 70-85% | 95-98% | 90-95% |
| 扭转刚度 | 中等 | 高 | 高 |
| 抗冲击性 | 差 | 好 | 优秀 |
| 成本 | 高 | 低 | 中 |
| 寿命 | 10000h | 20000h | 15000h |

选型决策树：
```
需要零背隙？
├─是→ 谐波减速器
└─否→ 需要高效率？
      ├─是→ 行星齿轮
      └─否→ 需要抗冲击？
            ├─是→ 摆线针轮
            └─否→ 成本优先→行星齿轮
```

## 2.5 液压执行器：阀控 vs 泵控系统

### 2.5.1 液压系统基础

液压系统利用帕斯卡定律实现力的放大：
$$F_2 = F_1 \cdot \frac{A_2}{A_1}$$

功率密度优势明显：
- 液压：3-7 kW/kg
- 电机：0.5-2 kW/kg

基本流量-压力关系：
$$Q = C_d A \sqrt{\frac{2\Delta P}{\rho}}$$

### 2.5.2 阀控系统

阀控系统通过伺服阀调节流量：

伺服阀传递函数：
$$\frac{Q(s)}{U(s)} = \frac{K_v}{1 + 2\zeta\omega_n s + s^2/\omega_n^2}$$

其中 $\omega_n$ 是自然频率（典型50-200 Hz），$\zeta$ 是阻尼比。

优点：
- 响应快速（<10ms）
- 控制精度高
- 多执行器共享泵源

缺点：
- 能效低（节流损失大）
- 发热严重
- 需要冷却系统

### 2.5.3 泵控系统

泵控系统通过变量泵直接控制：

斜盘式变量泵的排量控制：
$$V = V_{max} \cdot \sin(\alpha)$$

其中 $\alpha$ 是斜盘倾角。

能效分析：
- 阀控效率：25-35%
- 泵控效率：60-75%

动态响应限制：
- 斜盘惯量大，带宽低（5-20 Hz）
- 适合位置控制，不适合力控制

### 2.5.4 液压执行器设计

波士顿动力Atlas的液压设计要点：

1. **定制阀块**：集成化减少管路
2. **蓄能器**：吸收压力脉动，提供瞬时功率
3. **伺服阀选型**：MOOG或Parker高频响阀
4. **密封设计**：低摩擦密封提高效率

液压缸推力计算：
$$F = P \cdot A - F_{friction} - F_{backpressure}$$

泄漏模型（层流）：
$$Q_{leak} = \frac{\pi d h^3 \Delta P}{12 \mu L}$$

## 2.6 域控制器与三电系统

### 2.6.1 域控制器架构

现代机器人采用域控制器集中管理：

```
         主控制器
            |
    --------+--------
    |               |
运动域控制器    感知域控制器
    |               |
[电机1-n]      [相机,激光雷达]
```

通信带宽需求：
- 电机控制：1-10 kHz更新率
- 每轴数据：位置(4B) + 速度(4B) + 电流(4B) = 12B
- 20轴系统：20×12B×10kHz = 2.4 MB/s

### 2.6.2 电机驱动器设计

三相逆变器拓扑：

```
    DC+
     |
   |---|---|
   | Q1| Q3| Q5
   |---|---|---|
     U   V   W  → 电机
   |---|---|---|
   | Q2| Q4| Q6
   |---|---|
     |
    DC-
```

SVPWM调制的电压利用率：
$$V_{line-max} = \frac{V_{DC}}{\sqrt{3}} \times 1.15$$

比SPWM提高15%。

### 2.6.3 电池管理系统(BMS)

电池选型考虑：
- **能量密度**：180-260 Wh/kg (锂电池)
- **功率密度**：1-3 kW/kg
- **循环寿命**：1000-3000次@80% DOD

SOC估算（扩展卡尔曼滤波）：
$$\begin{cases}
SOC_{k+1} = SOC_k - \frac{\eta I \Delta t}{Q_{nom}} \\
V_{k} = OCV(SOC_k) - I_k R_{int}
\end{cases}$$

热管理需求：
$$P_{heat} = I^2 R_{int} + P_{switching}$$

电池温度需控制在15-35°C范围。

## 2.7 反驱性(Backdrivability)与力控制

### 2.7.1 反驱性定义与度量

反驱性定义为输出端施加力矩时输入端的响应能力：

反驱力矩：
$$\tau_{backdrive} = \frac{\tau_{output}}{i \cdot \eta_{reverse}}$$

其中 $\eta_{reverse}$ 是反向效率，通常远低于正向效率。

反驱性指标：
$$\text{Backdrivability} = \frac{\eta_{forward} \cdot \eta_{reverse}}{\eta_{forward} + \eta_{reverse}}$$

理想值接近1，实际系统：
- 准直驱：0.7-0.9
- 谐波减速：0.1-0.3
- 蜗轮蜗杆：<0.01（自锁）

### 2.7.2 提高反驱性的设计策略

1. **降低减速比**：准直驱方案
2. **减少摩擦**：精密轴承，优化预紧
3. **补偿控制**：摩擦力观测与补偿
4. **串联弹性**：SEA增加柔顺性

摩擦力模型（LuGre模型）：
$$F_f = \sigma_0 z + \sigma_1 \dot{z} + \sigma_2 \dot{x}$$

其中 $z$ 是鬃毛变形，需要在线辨识。

### 2.7.3 力控制实现

阻抗控制律：
$$\tau = J^T[K_p(x_d - x) + K_d(\dot{x}_d - \dot{x}) + F_d]$$

导纳控制（位置控制型）：
$$M\ddot{x} + D\dot{x} + Kx = F_{ext}$$

稳定性条件（Hogan）：
$$Z_{robot} + Z_{env} > 0$$

即机器人阻抗与环境阻抗之和必须为正。

## 2.8 热管理与连续扭矩限制

### 2.8.1 热源分析

电机发热的主要来源：

1. **铜损**（占60-70%）：
   $$P_{cu} = I^2 R = \frac{\tau^2 R}{k_t^2}$$

2. **铁损**（占20-30%）：
   $$P_{fe} = P_{hyst} + P_{eddy} = k_h f B^{1.6} + k_e f^2 B^2$$

3. **机械损耗**（占5-10%）：
   $$P_{mech} = P_{bearing} + P_{windage}$$

总损耗功率：
$$P_{loss} = P_{cu} + P_{fe} + P_{mech}$$

### 2.8.2 热模型与温升计算

集总参数热模型：
$$C_{th} \frac{dT}{dt} = P_{loss} - \frac{T - T_{amb}}{R_{th}}$$

稳态温升：
$$\Delta T_{ss} = P_{loss} \cdot R_{th}$$

其中：
- $C_{th}$：热容量 [J/K]
- $R_{th}$：热阻 [K/W]
- $T_{amb}$：环境温度

时间常数：
$$\tau_{thermal} = R_{th} \cdot C_{th}$$

典型值：小型电机5-10分钟，大型电机20-60分钟。

### 2.8.3 连续扭矩限制

连续扭矩由温升限制决定：

$$\tau_{continuous} = k_t \sqrt{\frac{T_{max} - T_{amb}}{R_{th} \cdot R}}$$

其中 $T_{max}$ 是绕组最高允许温度（通常130-180°C）。

短时过载能力：
$$\tau_{peak} = \tau_{continuous} \cdot \sqrt{\frac{t_{thermal}}{t_{peak}}}$$

典型过载系数：2-3倍，持续1-10秒。

### 2.8.4 散热优化策略

1. **自然对流**：
   $$h_{conv} = 1.42 \left(\frac{\Delta T}{L}\right)^{0.25}$$ 
   典型：5-25 W/m²K

2. **强制风冷**：
   $$h_{forced} = 10.45 - v + 10\sqrt{v}$$
   其中 $v$ 是风速 [m/s]

3. **液冷系统**：
   - 冷却液流量：$\dot{m} = \frac{P_{loss}}{c_p \Delta T}$
   - 压降：$\Delta P = f \frac{L}{D} \frac{\rho v^2}{2}$

4. **相变冷却**：
   利用相变材料(PCM)吸收瞬时热量

散热器设计：
$$R_{th,heatsink} = \frac{1}{h A \eta_{fin}}$$

其中 $\eta_{fin}$ 是翅片效率。

## 2.9 案例研究：MIT Mini Cheetah准直驱设计

### 2.9.1 设计理念

MIT Mini Cheetah采用准直驱方案的动机：
- 高带宽力控制（>100 Hz）
- 优秀的反驱性
- 简化机械结构
- 降低成本

关键参数：
- 电机：自研低惯量PMSM
- 减速比：6:1（腿部），9:1（髋部）
- 峰值扭矩：17 Nm（腿部），23 Nm（髋部）
- 质量：0.43 kg/执行器

### 2.9.2 电机优化

电机设计的创新点：

1. **低惯量转子**：
   $$J_{rotor} = 2.8 \times 10^{-5} kg \cdot m^2$$
   采用薄壁结构和高强度磁体

2. **高电机常数**：
   $$k_m = \frac{k_t}{\sqrt{R}} = 0.125 \frac{Nm}{\sqrt{W}}$$

3. **热管理**：
   - 定子灌封提高导热
   - 铝制外壳作为散热器
   - 连续功率：90W

### 2.9.3 控制策略

力矩控制环：
$$\tau = K_p(\theta_d - \theta) + K_d(\dot{\theta}_d - \dot{\theta}) + \tau_{ff}$$

电流环带宽：40 kHz
位置环带宽：1 kHz

前馈补偿：
- 重力补偿
- 摩擦补偿
- 惯量补偿

### 2.9.4 性能评估

实测性能指标：
- 力控带宽：>200 Hz
- 位置精度：<0.1°
- 效率：>80%（包含驱动器）
- 成本：<$500/执行器

对比传统方案（谐波减速器）：
- 成本降低60%
- 重量减轻40%
- 力控带宽提高10倍
- 位置精度略有下降

## 2.10 高级话题：串联弹性执行器(SEA)与变刚度执行器(VSA)

### 2.10.1 串联弹性执行器(SEA)

SEA在电机与负载间串联弹簧：

动力学模型：
$$\begin{cases}
I_m \ddot{\theta}_m = \tau_m - k_s(\theta_m - \theta_l) \\
I_l \ddot{\theta}_l = k_s(\theta_m - \theta_l) - \tau_{ext}
\end{cases}$$

力矩估算：
$$\tau = k_s(\theta_m - \theta_l)$$

优势：
- 无需力传感器
- 储能能力（爆发力）
- 天然柔顺性

设计要点：
- 弹簧刚度选择：$\omega_n = \sqrt{k_s/I_l} \approx 10-30 Hz$
- 弹簧线性度：<5%非线性
- 疲劳寿命：>10^7次循环

### 2.10.2 变刚度执行器(VSA)

VSA可在线调节刚度：

典型机构：
1. **拮抗式**：两个电机拮抗控制
2. **凸轮式**：改变力臂调节刚度
3. **杠杆式**：改变支点位置

刚度调节范围：10:1到100:1

控制策略：
$$\begin{cases}
\tau = \tau_1 + \tau_2 \\
k = \frac{\partial \tau}{\partial \theta} = k_0 + \alpha(\tau_1 - \tau_2)
\end{cases}$$

应用场景：
- 人机协作（安全性）
- 动态运动（能量存储）
- 不确定环境（适应性）

### 2.10.3 设计权衡

| 方案 | 复杂度 | 成本 | 带宽 | 效率 | 适用场景 |
|------|--------|------|------|------|----------|
| 刚性 | 低 | 低 | 高 | 高 | 精确位置控制 |
| SEA | 中 | 中 | 中 | 中 | 力控制、冲击吸收 |
| VSA | 高 | 高 | 低 | 低 | 人机交互、适应性 |
| 准直驱 | 低 | 中 | 高 | 高 | 高动态、力控制 |

## 本章小结

本章系统介绍了机器人执行器的选择与优化策略：

**核心概念**：
1. 电机类型选择：PMSM性能最优，BLDC成本效益好，伺服系统集成度高，准直驱方案平衡性能与成本
2. 永磁材料：钕铁硼性能强但温度敏感，钐钴稳定但成本高
3. 减速器权衡：谐波零背隙但效率低，行星齿轮高效但有背隙，摆线针轮抗冲击强
4. 液压系统：阀控响应快但效率低，泵控效率高但带宽有限
5. 反驱性：准直驱>谐波>蜗轮蜗杆，直接影响力控制性能
6. 热管理：连续扭矩受温升限制，需要综合散热设计

**关键公式**：
- 电机力矩：$\tau = k_t \cdot I$
- 热稳态温升：$\Delta T = P_{loss} \cdot R_{th}$
- 反驱性指标：$\text{Backdrivability} = \frac{\eta_f \cdot \eta_r}{\eta_f + \eta_r}$
- SEA力矩估算：$\tau = k_s(\theta_m - \theta_l)$

**设计准则**：
1. 根据应用需求选择执行器类型
2. 平衡性能、成本、复杂度
3. 考虑系统级优化，而非单一组件
4. 重视热管理和长期可靠性

## 练习题

### 基础题

**习题2.1** 某PMSM电机的力矩常数$k_t = 0.1$ Nm/A，相电阻$R = 0.5$ Ω。若要输出2 Nm的连续力矩，计算铜损功率。

*提示：使用$P_{cu} = I^2R$和$\tau = k_t I$的关系。*

<details>
<summary>答案</summary>

由$\tau = k_t I$得：$I = \tau/k_t = 2/0.1 = 20$ A

铜损功率：$P_{cu} = I^2R = 20^2 \times 0.5 = 200$ W

这说明即使是相对较小的2 Nm连续力矩，也需要200W的散热能力。
</details>

**习题2.2** 谐波减速器的柔轮齿数为200，刚轮齿数为202。计算减速比，并解释为什么输出方向与输入相反。

*提示：使用减速比公式$i = (Z_2 - Z_1)/Z_1$。*

<details>
<summary>答案</summary>

减速比：$i = (202 - 200)/200 = 2/200 = 1/100 = 100:1$

输出方向相反是因为：
- 波发生器每转一圈，柔轮相对刚轮反向转动2个齿
- 减速比为正值表示反向
- 若需同向，可固定柔轮，输出从刚轮取出
</details>

**习题2.3** 某机器人关节需要50 Nm峰值力矩，5 Nm连续力矩。现有电机峰值力矩2 Nm，连续力矩0.5 Nm。设计减速比并分析是否满足要求。

*提示：考虑峰值和连续两个约束条件。*

<details>
<summary>答案</summary>

峰值力矩要求：$i_{peak} = 50/2 = 25:1$
连续力矩要求：$i_{cont} = 5/0.5 = 10:1$

需要选择$i = 25:1$以满足峰值要求。

验证连续力矩：$\tau_{cont} = 0.5 \times 25 \times \eta$
假设效率$\eta = 0.8$：$\tau_{cont} = 10$ Nm > 5 Nm ✓

结论：选择25:1减速比，两个要求都满足。
</details>

**习题2.4** 某电机在环境温度25°C下运行，热阻$R_{th} = 2$ K/W，最高允许温度150°C。计算最大允许损耗功率。

*提示：使用稳态温升公式。*

<details>
<summary>答案</summary>

最大温升：$\Delta T_{max} = 150 - 25 = 125$ K

最大损耗功率：$P_{max} = \Delta T_{max}/R_{th} = 125/2 = 62.5$ W

这个功率包括铜损、铁损和机械损耗的总和。
</details>

### 挑战题

**习题2.5** 设计一个轮足机器人的膝关节执行器。要求：最大力矩100 Nm，连续力矩20 Nm，响应带宽>50 Hz，具备一定反驱性。对比分析谐波减速器方案和准直驱方案，给出推荐方案及理由。

*提示：考虑带宽、反驱性、成本、复杂度等多个因素。*

<details>
<summary>答案</summary>

**谐波减速器方案**：
- 选择4 Nm电机 + 50:1谐波减速器
- 峰值力矩：4 × 50 × 0.8 = 160 Nm ✓
- 连续力矩：0.8 × 50 × 0.8 = 32 Nm ✓  
- 带宽：受减速器柔性限制，约20-30 Hz ✗
- 反驱性：差，效率<30% ✗
- 成本：高（谐波减速器昂贵）

**准直驱方案**：
- 选择12 Nm电机 + 10:1行星齿轮
- 峰值力矩：12 × 10 × 0.95 = 114 Nm ✓
- 连续力矩：2.5 × 10 × 0.95 = 23.75 Nm ✓
- 带宽：>100 Hz ✓
- 反驱性：良好，效率>70% ✓
- 成本：中等

**推荐**：准直驱方案
- 满足所有性能要求
- 更好的动态性能和反驱性
- 适合轮足机器人的高动态需求
- 成本效益更好
</details>

**习题2.6** 某伺服系统采用17位编码器（131072 CPR），减速比50:1。计算输出轴的理论分辨率（度）。若机械背隙为3 arcmin，分析实际可达精度。

*提示：考虑编码器分辨率和机械背隙的综合影响。*

<details>
<summary>答案</summary>

编码器分辨率：$360°/131072 = 0.00275°$/计数

输出轴理论分辨率：$0.00275°/50 = 0.000055° = 0.2$ arcsec

机械背隙：3 arcmin = 0.05°

实际精度分析：
- 理论分辨率远优于背隙（0.000055° << 0.05°）
- 实际定位精度受背隙限制：约±0.05°
- 重复定位精度（单向）：可达0.001°量级
- 双向定位需要背隙补偿

结论：高分辨率编码器的优势被机械背隙抵消，需要采用预紧或补偿策略。
</details>

**习题2.7** 分析准直驱方案中电机惯量与负载惯量的匹配问题。若负载惯量$J_l = 0.01$ kg·m²，减速比$N = 8$，如何选择电机惯量$J_m$以优化系统带宽？推导最优惯量比。

*提示：考虑反射惯量和系统总惯量的关系。*

<details>
<summary>答案</summary>

系统总惯量（从电机侧看）：
$$J_{total} = J_m + \frac{J_l}{N^2} = J_m + \frac{0.01}{64} = J_m + 0.000156$$

系统带宽：$\omega_n = \sqrt{K/J_{total}}$

最优惯量匹配条件（最大加速度）：
$$J_m = \frac{J_l}{N^2}$$

因此：$J_m = 0.01/64 = 0.000156$ kg·m²

验证：
- 惯量比 = 1:1（最优）
- 总惯量最小化 = 2×0.000156 = 0.000312 kg·m²
- 保证最大加速度和带宽

实践考虑：
- 电机惯量过小难以制造
- 通常选择惯量比在1:1到1:5之间
- 本例中可选$J_m = 0.0002-0.0008$ kg·m²
</details>

**习题2.8** 设计一个串联弹性执行器(SEA)用于机械臂末端。要求感知精度0.1 N，最大力200 N，固有频率15 Hz。确定弹簧刚度、编码器分辨率要求，并分析潜在的控制挑战。

*提示：SEA的力感知基于弹簧变形测量。*

<details>
<summary>答案</summary>

**弹簧刚度设计**：

固有频率：$f_n = \frac{1}{2\pi}\sqrt{k/m} = 15$ Hz

假设末端负载质量 m = 2 kg：
$$k = (2\pi f_n)^2 \cdot m = (2\pi \times 15)^2 \times 2 = 17771$ N/m

**编码器分辨率**：

力分辨率0.1 N对应的变形：
$$\Delta x = F/k = 0.1/17771 = 5.6 \times 10^{-6}$ m = 5.6 μm

最大变形（200 N）：
$$x_{max} = 200/17771 = 0.0113$ m = 11.3 mm

需要的编码器分辨率：
$$\text{counts} = 11.3\text{mm}/5.6\text{μm} = 2018$$

选择12位编码器（4096计数）足够。

**控制挑战**：
1. 低通滤波特性（15 Hz带宽限制）
2. 共振峰需要阻尼控制
3. 非配置空间（力矩vs位置）
4. 弹簧非线性和迟滞
5. 编码器噪声放大（刚度很大）

**解决方案**：
- 采用力矩观测器+低通滤波
- 主动阻尼控制抑制振荡
- 自适应控制补偿非线性
</details>

## 常见陷阱与错误

1. **电机选型错误**
   - 陷阱：只看峰值力矩，忽略连续力矩
   - 后果：过热停机或烧毁
   - 预防：详细热分析，留足裕量

2. **减速器背隙忽视**
   - 陷阱：高精度编码器配低质量减速器
   - 后果：定位精度差，振荡
   - 预防：选择零背隙或预紧方案

3. **惯量失配**
   - 陷阱：电机惯量<<负载反射惯量
   - 后果：响应慢，易振荡
   - 预防：惯量比控制在1:1到1:10

4. **通信带宽不足**
   - 陷阱：多轴同步控制时总线拥塞
   - 后果：控制延迟，不同步
   - 预防：选择EtherCAT等实时总线

5. **热设计不足**
   - 陷阱：按峰值功率设计散热
   - 后果：连续运行过热
   - 预防：按RMS功率+安全系数设计

6. **电磁兼容问题**
   - 陷阱：PWM开关噪声干扰传感器
   - 后果：测量噪声，控制不稳
   - 预防：屏蔽、滤波、接地设计

## 最佳实践检查清单

### 执行器选型检查
- [ ] 峰值和连续力矩都满足要求
- [ ] 速度范围覆盖应用需求
- [ ] 惯量匹配合理（1:1到1:10）
- [ ] 效率满足能耗要求
- [ ] 成本在预算内

### 热设计检查
- [ ] 计算最坏情况下的发热功率
- [ ] 散热方案能处理连续功率
- [ ] 温度传感器布置合理
- [ ] 有过热保护机制
- [ ] 考虑环境温度变化

### 控制系统检查
- [ ] 编码器分辨率足够
- [ ] 通信带宽满足更新率
- [ ] 电流环、速度环、位置环依次调试
- [ ] 前馈补偿提高动态性能
- [ ] 安全限位和急停设计

### 机械集成检查
- [ ] 安装接口标准化
- [ ] 线缆管理不影响运动
- [ ] 密封等级满足环境要求
- [ ] 维护保养方便
- [ ] 备件可获得性

### 可靠性检查
- [ ] MTBF满足要求
- [ ] 关键件有冗余
- [ ] 故障模式分析(FMEA)
- [ ] 加速寿命测试
- [ ] 现场可更换单元(FRU)设计