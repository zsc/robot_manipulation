# 第13章：抓取理论与规划

抓取是机器人操作的基础能力，涉及接触力学、几何约束、运动规划等多个领域的交叉。本章系统介绍抓取的理论基础，从力闭合与形闭合的数学分析开始，深入探讨抓取质量评估、抓取综合方法，以及触觉感知的集成。我们将重点关注工业应用中的实际约束，包括夹爪设计、传感器噪声、计算效率等工程考量。通过学习本章内容，读者将掌握设计和实现鲁棒抓取系统所需的核心知识。

**学习目标**：
- 理解力闭合与形闭合的数学条件，能够分析给定抓取的稳定性
- 掌握Ferrari-Canny等抓取质量度量，能够定量评估和优化抓取配置
- 比较解析法与采样法的优劣，选择适合应用场景的抓取综合方法
- 熟悉主流抓取数据集和评估协议，能够基准测试抓取算法
- 理解触觉反馈在抓取中的作用，设计触觉引导的控制策略

## 13.1 抓取分析：力闭合与形闭合

抓取分析的核心是判断给定的接触配置能否稳定地固定物体。这涉及两个基本概念：力闭合（Force Closure）和形闭合（Form Closure）。

### 13.1.1 接触模型与摩擦锥

机器人夹爪与物体的接触可以建模为点接触，每个接触点可以施加的力受到摩擦锥约束。对于第 $i$ 个接触点：

$$\mathcal{FC}_i = \{\mathbf{f}_i \in \mathbb{R}^3 : \|\mathbf{f}_{it}\| \leq \mu_i f_{in}, f_{in} \geq 0\}$$

其中 $\mathbf{f}_{it}$ 是切向力分量，$f_{in}$ 是法向力分量，$\mu_i$ 是摩擦系数。

```
      法向力 f_n
          ↑
          |
    \     |     /  ← 摩擦锥
     \    |    /      (半锥角 = arctan(μ))
      \   |   /
       \  |  /
        \ | /
         \|/
    ------*------ 接触面
     接触点
```

摩擦锥的线性化近似常用于计算效率：将圆锥用 $m$ 边棱锥近似，每个棱代表一个基础力方向。

### 13.1.2 抓取矩阵与扳手空间

对于 $n$ 个接触点的抓取，抓取矩阵 $G \in \mathbb{R}^{6 \times 3n}$ 将接触力映射到物体坐标系的扳手（力和力矩）：

$$\mathbf{w} = G \mathbf{f} = \begin{bmatrix} \mathbf{f}_{\text{total}} \\ \boldsymbol{\tau}_{\text{total}} \end{bmatrix}$$

其中 $G$ 的第 $i$ 列块为：

$$G_i = \begin{bmatrix} I_3 \\ \mathbf{p}_i \times I_3 \end{bmatrix}$$

$\mathbf{p}_i$ 是接触点相对于物体质心的位置向量。

### 13.1.3 力闭合条件

力闭合要求抓取能够抵抗任意方向的外部扰动。数学定义：

**定义**：如果凸锥 $\text{ConvexHull}(GF)$ 包含原点的邻域，则抓取是力闭合的，其中 $F$ 是所有可行接触力的集合。

实际判断力闭合的计算方法：

1. **凸包法**：计算所有基础扳手的凸包，检查原点是否在内部
2. **线性规划法**：对每个扳手方向 $\mathbf{w}_d$，求解：
   $$\min_{\mathbf{f}} \|\mathbf{f}\| \quad \text{s.t.} \quad G\mathbf{f} = \mathbf{w}_d, \mathbf{f} \in F$$
   如果所有方向都有解，则力闭合

### 13.1.4 形闭合条件

形闭合是更强的条件，要求纯几何约束就能固定物体（不依赖摩擦）。

**定理**：平面内至少需要4个接触点实现形闭合，3D空间至少需要7个接触点。

形闭合的充要条件是接触法向量张成整个空间，且存在严格正的法向力使合力为零：

$$\exists \mathbf{f}_n > 0: G_n \mathbf{f}_n = 0$$

其中 $G_n$ 只包含法向分量。

### 13.1.5 实际工程考虑

在实际系统中，理论分析需要考虑多个工程因素：

1. **接触位置不确定性**：视觉定位误差导致实际接触点偏离预期，需要鲁棒性分析
2. **摩擦系数估计**：材料属性的不确定性要求保守的摩擦锥估计
3. **夹爪柔顺性**：软指接触产生面接触而非点接触，改变力传递特性
4. **动态效应**：快速抓取时的惯性力需要额外的安全裕度

**鲁棒力闭合判据**：引入安全系数 $\epsilon > 0$，要求：

$$\min_{\|\mathbf{w}\|=1} \max_{\mathbf{f} \in F} \mathbf{w}^T G\mathbf{f} \geq \epsilon$$

这确保即使在扰动下，抓取仍能保持稳定。

## 13.2 抓取质量度量：Ferrari-Canny指标

仅判断力闭合是不够的，我们需要定量评估抓取的"质量"。Ferrari-Canny指标是最广泛使用的度量方法。

### 13.2.1 抓取扳手空间与单位球

抓取扳手空间（Grasp Wrench Space, GWS）定义为所有可实现扳手的集合：

$$\text{GWS} = \{G\mathbf{f} : \mathbf{f} \in F\}$$

为了归一化不同量纲（力和力矩），引入任务扳手空间的椭球表示：

$$\mathcal{W} = \{\mathbf{w} : \mathbf{w}^T Q \mathbf{w} \leq 1\}$$

其中 $Q$ 是正定矩阵，反映任务中不同扳手分量的相对重要性。常见选择：

$$Q = \begin{bmatrix} \frac{1}{f_{\max}^2} I_3 & 0 \\ 0 & \frac{1}{\tau_{\max}^2} I_3 \end{bmatrix}$$

### 13.2.2 Ferrari-Canny度量定义

Ferrari-Canny指标定义为GWS能包含的最大任务球半径：

$$\epsilon_{FC} = \max\{r : r\mathcal{B} \subseteq \text{GWS} \cap \mathcal{W}\}$$

其中 $\mathcal{B}$ 是单位球。几何解释：$\epsilon_{FC}$ 是GWS内接球的半径，表示抓取能抵抗的最小扰动幅度。

计算方法：
1. 将摩擦锥离散化为 $m$ 个基础力方向
2. 计算基础扳手集 $\{\mathbf{w}_j\}_{j=1}^{mn}$
3. 求解优化问题：

$$\epsilon_{FC} = \min_{j} \|\mathbf{w}_j\|_Q^{-1}$$

### 13.2.3 其他质量度量

除Ferrari-Canny外，常用的抓取质量度量包括：

1. **体积度量**：GWS的体积，反映抓取的总体能力
   $$Q_{\text{vol}} = \text{Volume}(\text{GWS})$$

2. **最大内接球**：考虑力约束的最大球
   $$Q_{\text{ball}} = \max\{r : r\mathcal{B} \subseteq \text{GWS}, \|\mathbf{f}\| \leq f_{\max}\}$$

3. **任务导向度量**：针对特定任务扳手 $\mathbf{w}_{\text{task}}$
   $$Q_{\text{task}} = \min_{\mathbf{f}} \|\mathbf{f}\| \quad \text{s.t.} \quad G\mathbf{f} = \mathbf{w}_{\text{task}}$$

4. **鲁棒性度量**：考虑接触位置不确定性 $\Delta p$
   $$Q_{\text{robust}} = \min_{\|\Delta p\| \leq \delta} \epsilon_{FC}(p + \Delta p)$$

### 13.2.4 计算优化技巧

Ferrari-Canny指标的精确计算复杂度高，实际应用中常用近似方法：

1. **凸包简化**：只保留凸包顶点，减少计算量
2. **采样近似**：随机采样扳手方向，估计最小值
3. **梯度优化**：将离散问题松弛为连续优化
4. **查找表**：预计算常见物体形状的质量度量

## 13.3 抓取综合：解析法vs采样法

抓取综合（Grasp Synthesis）的目标是自动生成高质量的抓取配置。方法可分为解析法和采样法两大类。

### 13.3.1 解析法：基于几何约束

解析法通过数学优化直接求解最优抓取位置。

**基于对称性的方法**：
对于规则形状（圆柱、长方体等），利用对称性简化搜索：

```
    平行夹爪抓取圆柱体
         ___
        /   \
    ---|     |---  ← 夹爪沿直径方向
        \___/
    
    最优抓取线通过质心
```

**基于曲率的方法**：
选择曲率互补的接触点，最大化形闭合可能性：

$$\max_{p_1, p_2} \kappa(p_1) + \kappa(p_2) \quad \text{s.t.} \quad \mathbf{n}(p_1) = -\mathbf{n}(p_2)$$

其中 $\kappa$ 是曲率，$\mathbf{n}$ 是法向量。

**优化框架**：
将抓取综合形式化为约束优化问题：

$$\begin{aligned}
\max_{\mathbf{p}, \mathbf{f}} &\quad Q(\mathbf{p}, \mathbf{f}) \\
\text{s.t.} &\quad G(\mathbf{p})\mathbf{f} = \mathbf{0} \quad \text{(平衡约束)} \\
&\quad \mathbf{f} \in F \quad \text{(摩擦锥约束)} \\
&\quad \mathbf{p} \in \partial\Omega \quad \text{(接触在物体表面)}
\end{aligned}$$

### 13.3.2 采样法：数据驱动方法

采样法通过生成大量候选抓取并评分选择。

**启发式采样**：
1. **Antipodal抓取**：寻找对向平行表面
2. **边缘抓取**：沿物体轮廓采样
3. **主轴对齐**：沿主成分分析(PCA)轴采样

**学习型采样**：
使用神经网络预测抓取质量分布：

$$p(\text{success}|\mathbf{g}, \mathbf{I}) = f_\theta(\mathbf{g}, \mathbf{I})$$

其中 $\mathbf{g}$ 是抓取参数，$\mathbf{I}$ 是输入图像，$f_\theta$ 是深度网络。

### 13.3.3 深度学习方法

现代抓取综合大量使用深度学习，主要架构包括：

**1. 基于CNN的方法**：
- **GraspNet**：直接回归抓取矩形参数
- **DexNet**：预测抓取成功概率的分类网络
- **GPD (Grasp Pose Detection)**：在点云上生成6-DOF抓取

**2. 基于Transformer的方法**：
利用注意力机制建模全局依赖：

$$\mathbf{h}_i = \text{Attention}(\mathbf{q}_i, \{\mathbf{k}_j, \mathbf{v}_j\}_{j=1}^N)$$

**3. 生成模型**：
- **VAE-Grasp**：学习抓取的隐空间表示
- **Diffusion-Grasp**：通过去噪过程生成抓取
- **GAN-Grasp**：对抗训练生成真实抓取

### 13.3.4 实时性与精度权衡

不同应用场景对实时性要求不同：

| 方法类型 | 计算时间 | 成功率 | 适用场景 |
|---------|---------|--------|---------|
| 解析法 | 100-1000ms | 85-95% | 已知模型 |
| 启发式采样 | 10-100ms | 70-85% | 快速抓取 |
| CNN预测 | 20-50ms | 80-90% | 实时应用 |
| Transformer | 100-500ms | 85-95% | 高精度需求 |

**加速技巧**：
1. **分层搜索**：粗到精的多分辨率策略
2. **GPU并行**：批量评估候选抓取
3. **模型量化**：INT8推理加速
4. **知识蒸馏**：小模型逼近大模型性能

## 13.4 抓取数据集：YCB、EGAD评估

标准化的数据集和评估协议对算法开发至关重要。本节介绍主流抓取数据集及其使用方法。

### 13.4.1 YCB (Yale-CMU-Berkeley) 数据集

YCB是最广泛使用的操作基准数据集，包含77个日常物体的高质量模型。

**物体类别分布**：
- 食品类：香蕉、苹果、饼干盒等
- 厨房用品：杯子、碗、叉子等
- 工具类：锤子、螺丝刀、扳手等
- 形状基元：球、立方体、圆柱等

**数据格式**：
```
YCB_Object/
├── 001_chips_can/
│   ├── meshes/
│   │   ├── textured.obj     # 纹理网格
│   │   └── collision.stl    # 碰撞网格
│   ├── rgbd/
│   │   ├── rgb_*.png        # RGB图像
│   │   └── depth_*.png      # 深度图
│   └── calibration.txt      # 相机参数
```

**评估指标**：
1. **抓取成功率**：物理仿真或真实机器人测试
2. **力闭合率**：满足力闭合条件的比例
3. **抗扰动能力**：施加随机力后的稳定性

### 13.4.2 EGAD (Evolved Grasping Analysis Dataset)

EGAD包含2000+程序生成的复杂形状，用于测试算法泛化能力。

**生成策略**：
- 基础形状：超二次曲面参数化
- 演化算法：优化形状复杂度和可抓取性
- 多样性保证：形状特征的均匀分布

**难度分级**：
```
Level 1: 简单凸形状，明显抓取点
Level 2: 轻度凹陷，需要精确定位
Level 3: 复杂拓扑，多个局部最优
Level 4: 极端形状，挑战算法极限
```

### 13.4.3 其他重要数据集

**1. DexNet数据集**：
- 670万合成点云-抓取对
- 基于物理仿真的质量标签
- 包含传感器噪声模型

**2. Cornell抓取数据集**：
- 1035张RGB-D图像
- 240个物体的8019个标注抓取
- 矩形抓取表示（2D平面）

**3. ACRONYM**：
- 8872个物体网格
- 1780万个模拟抓取
- 多指手和平行夹爪配置

### 13.4.4 评估协议与基准测试

**标准评估流程**：
1. **训练/测试划分**：
   - 已见物体：80/20划分
   - 未见物体：按类别划分
   - 跨数据集：训练集A，测试集B

2. **成功判定准则**：
   - **解析判定**：力闭合 + 最小质量阈值
   - **仿真判定**：抬起高度 > 10cm
   - **真机判定**：完成拾取-放置任务

3. **鲁棒性测试**：
   - 位姿扰动：±5mm位置，±5°角度
   - 物理参数：摩擦系数±30%
   - 遮挡：25%、50%、75%遮挡率

**基准算法对比**：

| 算法 | YCB成功率 | EGAD成功率 | 推理时间 |
|-----|-----------|------------|----------|
| GPD | 75% | 68% | 1.5s |
| DexNet 2.0 | 82% | 71% | 0.8s |
| Contact-GraspNet | 88% | 76% | 0.3s |
| GraspDiffusion | 91% | 79% | 0.5s |

### 13.4.5 数据增强与域适应

**合成数据增强**：
1. **域随机化**：纹理、光照、背景变化
2. **物理扰动**：质量、摩擦、刚度随机化
3. **噪声注入**：深度噪声、标定误差模拟

**真实数据收集**：
1. **主动学习**：选择信息量最大的样本
2. **人在回路**：专家纠正失败案例
3. **自监督**：利用成功抓取自动标注

## 13.5 触觉感知在抓取中的作用

触觉反馈提供了视觉无法获得的接触信息，对精细操作至关重要。

### 13.5.1 触觉传感器类型

**1. 力/扭矩传感器**：
测量6轴力和力矩，常安装在手腕处：

$$\mathbf{F} = \begin{bmatrix} F_x & F_y & F_z & \tau_x & \tau_y & \tau_z \end{bmatrix}^T$$

典型产品：ATI Mini45 (分辨率0.025N)

**2. 阵列式触觉传感器**：
提供接触压力分布图：

```
    触觉图像 (16×16像素)
    ┌─────────────┐
    │ · · · ■ ■ · │  压力值
    │ · · ■ ■ ■ · │  0-255
    │ · ■ ■ ■ ■ · │  
    │ · · ■ ■ · · │
    └─────────────┘
```

典型产品：Tekscan、Xela Robotics

**3. 光学触觉传感器**：
使用相机捕获弹性体形变：
- **GelSight**：基于光度立体视觉
- **DIGIT**：紧凑型设计，适合指尖集成
- **TacTip**：生物启发的针状结构

**4. 电容式/电阻式传感器**：
- 响应速度快（>1kHz）
- 成本低，易于集成
- 分辨率有限

### 13.5.2 滑动检测与预测

滑动是抓取失败的主要原因，触觉能提供早期预警。

**滑动检测算法**：

1. **频域分析**：滑动产生高频振动
   $$S(\omega) = \mathcal{F}\{f(t)\}, \quad \text{滑动} \Leftrightarrow S(\omega > \omega_0) > \theta$$

2. **切向力比率**：
   $$\text{滑动风险} = \frac{\|\mathbf{f}_t\|}{\mu f_n}$$
   当比率接近1时，即将滑动

3. **深度学习方法**：
   使用LSTM预测未来滑动概率：
   $$p_{\text{slip}}(t+\Delta t) = \text{LSTM}(\mathbf{x}_1, ..., \mathbf{x}_t)$$

### 13.5.3 触觉引导的抓取策略

**1. 接触前探索**：
```python
# 伪代码：触觉引导接近
while not contact_detected:
    move_toward_object(slow_speed)
    if tactile_reading > threshold:
        contact_detected = True
        record_contact_point()
```

**2. 力控制抓取**：
维持恒定抓取力，防止损坏易碎物体：

$$\mathbf{u} = K_p(f_d - f_m) + K_i \int(f_d - f_m)dt$$

其中 $f_d$ 是期望力，$f_m$ 是测量力。

**3. 触觉伺服**：
基于触觉图像的视觉伺服：

$$\dot{\mathbf{x}} = -\lambda L^+ (\mathbf{s} - \mathbf{s}^*)$$

其中 $L$ 是触觉雅可比矩阵，$\mathbf{s}$ 是触觉特征。

### 13.5.4 多模态融合

视觉和触觉的互补性：

| 特性 | 视觉 | 触觉 |
|-----|------|------|
| 感知范围 | 全局 | 局部接触 |
| 遮挡处理 | 差 | 好 |
| 材质识别 | 有限 | 优秀 |
| 实时性 | 30-60Hz | 100-1000Hz |

**融合架构**：
1. **早期融合**：原始数据级别结合
2. **中期融合**：特征级别结合
3. **晚期融合**：决策级别结合

**Transformer融合网络**：
```
视觉特征 → [Encoder] ─┐
                      ├→ [Cross-Attention] → 抓取决策
触觉特征 → [Encoder] ─┘
```

### 13.5.5 触觉仿真与Sim2Real

触觉数据收集成本高，仿真成为重要补充：

**触觉渲染模型**：
1. **有限元方法(FEM)**：精确但计算密集
2. **质点弹簧模型**：快速近似
3. **数据驱动模型**：神经网络拟合真实响应

**域适应技术**：
- **风格迁移**：将仿真触觉图像转换为真实风格
- **域对抗训练**：学习域不变特征
- **渐进式适应**：从仿真到真实的渐进训练

## 案例研究：Amazon机器人拣选挑战获胜方案

Amazon Robotics Challenge (ARC) 是推动抓取技术发展的重要竞赛。本节分析2017年获胜团队的技术方案。

### 背景与挑战

**任务要求**：
- 从货架抓取指定商品
- 处理未知物体
- 密集场景下的遮挡处理
- 3分钟内完成尽可能多的拣选

**技术难点**：
1. 物体多样性：从网球到书本
2. 包装反光：塑料袋造成深度失效
3. 物体纠缠：线缆、衣物缠绕
4. 时间压力：速度与准确性平衡

### 获胜方案：Cartesian (澳大利亚团队)

**系统架构**：
```
相机阵列 → 多视角融合 → 实例分割 → 抓取规划 → 执行
   ↓           ↓            ↓           ↓          ↓
RealSense  PointCloud   Mask R-CNN   Heuristic  UR5+吸盘
```

**关键创新**：

1. **多模态末端执行器**：
   - 双指夹爪 + 真空吸盘组合
   - 根据物体类型自动切换
   - 吸盘处理平面物体，夹爪处理不规则形状

2. **分层抓取策略**：
   ```python
   if object.is_flat() and object.top_visible():
       use_suction_cup()
   elif object.has_handle() or object.is_rigid():
       use_parallel_gripper()
   else:
       use_hybrid_approach()
   ```

3. **主动感知**：
   - 推拨动作分离紧密接触物体
   - 多角度观察减少遮挡
   - 触觉反馈确认抓取成功

4. **失败恢复机制**：
   - 检测掉落并重新定位
   - 抓取力自适应调整
   - 备选抓取点队列

**性能指标**：
- 拣选成功率：>95%
- 平均拣选时间：8.5秒/件
- 未知物体成功率：>85%

### 技术要点总结

1. **传感器冗余**：多相机消除盲区
2. **执行器多样性**：适应不同物体特性
3. **鲁棒性优先**：宁慢勿错的策略
4. **快速迭代**：基于真机数据持续优化

## 高级话题：软体抓手与适应性抓取

传统刚性夹爪在处理易碎、不规则物体时存在局限。软体抓手提供了新的解决方案。

### 软体抓手原理

**驱动方式**：
1. **气动驱动**：通过充气产生弯曲
2. **线驱动**：拉线控制形变
3. **智能材料**：形状记忆合金、电活性聚合物

**变形模式**：
```
     未充气          充气后
    |  |  |        \  |  /
    |  |  |         \ | /
    |  |  |    →     \|/
    |  |  |          ╱ ╲
    ────────        ╱   ╲
```

### 设计原则

**1. 本征柔顺性**：
材料本身的柔性提供被动适应：

$$E_{\text{soft}} \approx 10^5 \text{ Pa} \ll E_{\text{rigid}} \approx 10^{10} \text{ Pa}$$

**2. 欠驱动设计**：
自由度多于控制输入，自然包络物体：

$$n_{\text{DOF}} > n_{\text{actuator}}$$

**3. 分布式接触**：
增大接触面积，降低局部压力：

$$p_{\text{avg}} = \frac{F_{\text{total}}}{A_{\text{contact}}}$$

### 控制策略

**1. 形态计算**：
利用材料特性简化控制：
- 被动适应减少传感需求
- 机械智能降低计算负担

**2. 学习型控制**：
软体的非线性需要数据驱动方法：

$$\mathbf{u} = \pi_\theta(\mathbf{s}, \mathbf{g})$$

其中策略 $\pi_\theta$ 通过强化学习获得。

**3. 混合控制**：
结合模型和学习：
- 粗粒度：解析模型
- 精细调节：神经网络补偿

### 应用优势

| 特性 | 刚性夹爪 | 软体抓手 |
|-----|---------|---------|
| 适应性 | 需要精确控制 | 被动适应 |
| 安全性 | 需要力限制 | 本征安全 |
| 易碎物处理 | 困难 | 优秀 |
| 定位精度 | 高 | 中等 |
| 负载能力 | 高 | 有限 |

### 研究前沿

1. **可变刚度**：按需调节软硬程度
2. **自修复材料**：损伤后自动恢复
3. **生物启发设计**：章鱼、象鼻仿生
4. **4D打印**：时变形状编程

## 本章小结

本章系统介绍了机器人抓取的理论基础与实践方法：

**核心概念回顾**：

1. **力闭合与形闭合**：抓取稳定性的数学基础
   - 力闭合：$\text{ConvexHull}(GF) \ni \mathbf{0}$
   - 形闭合：纯几何约束，需要更多接触点

2. **Ferrari-Canny指标**：定量评估抓取质量
   - $\epsilon_{FC} = \max\{r : r\mathcal{B} \subseteq \text{GWS}\}$
   - 表征抗扰动能力

3. **抓取综合方法**：
   - 解析法：基于优化，适合已知模型
   - 采样法：数据驱动，泛化能力强
   - 深度学习：端到端学习，实时性好

4. **触觉感知**：
   - 提供接触信息，检测滑动
   - 与视觉互补，提高鲁棒性
   - 触觉伺服实现精细操作

5. **软体抓手**：
   - 本征柔顺性，被动适应
   - 安全性高，适合人机协作
   - 欠驱动设计简化控制

**关键公式汇总**：

- 抓取矩阵：$\mathbf{w} = G\mathbf{f}$
- 摩擦锥：$\|\mathbf{f}_t\| \leq \mu f_n$
- 质量度量：$Q = \min_j \|\mathbf{w}_j\|^{-1}$
- 滑动检测：$\|\mathbf{f}_t\|/(\mu f_n) \to 1$

**工程实践要点**：

1. 传感器融合提高鲁棒性
2. 多模态执行器适应多样物体
3. 失败恢复机制保证任务完成
4. 仿真训练加速算法开发
5. 标准数据集验证算法性能

## 练习题

### 基础题

**练习13.1**：给定一个边长为10cm的立方体，摩擦系数μ=0.3，使用平行夹爪从相对的两个面中心抓取。计算最大可承受的切向力。

<details>
<summary>提示</summary>
考虑摩擦锥约束和对称性
</details>

<details>
<summary>答案</summary>
设法向力为$F_n$，由摩擦锥约束：$F_t \leq \mu F_n = 0.3F_n$。由于两侧对称施力，总切向力承受能力为$2 \times 0.3F_n = 0.6F_n$。若夹持力为10N，则最大切向力为6N。
</details>

**练习13.2**：证明平面内三个非共线接触点可以实现力闭合，但不能实现形闭合。

<details>
<summary>提示</summary>
考虑摩擦力的作用和纯法向力的限制
</details>

<details>
<summary>答案</summary>
力闭合：三个接触点的摩擦锥可以张成整个平面，满足力闭合条件。形闭合：仅用法向力（指向物体内部），三个向量最多张成一个半平面，无法平衡所有方向的力，因此不满足形闭合。需要至少4个接触点。
</details>

**练习13.3**：计算一个半径5cm圆柱体的最优两指抓取位置，使Ferrari-Canny指标最大。

<details>
<summary>提示</summary>
利用对称性和对心抓取的优势
</details>

<details>
<summary>答案</summary>
最优抓取位置在直径两端（对心抓取）。此时接触法向量完全相反，抓取矩阵条件数最小，GWS最大。Ferrari-Canny指标达到最大值，等于摩擦系数μ（假设归一化后）。
</details>

**练习13.4**：设计一个算法，从点云中提取Antipodal抓取对。

<details>
<summary>提示</summary>
寻找法向量近似相反的点对
</details>

<details>
<summary>答案</summary>
算法步骤：1)计算点云法向量；2)对每个点，搜索法向量夹角>160°的候选点；3)检查两点间无遮挡；4)验证夹爪可达性；5)按法向量平行度和距离评分排序。
</details>

### 挑战题

**练习13.5**：推导软体抓手的最小充气压力，使其能够稳定抓取质量为m的球形物体。考虑材料杨氏模量E，抓手几何参数。

<details>
<summary>提示</summary>
建立力平衡方程，考虑接触面积与压力的关系
</details>

<details>
<summary>答案</summary>
设接触面积为A，法向接触力需平衡重力：$F_n = mg$。由Hertz接触理论，接触压力$p \propto (PE/R)^{2/3}$，其中P是充气压力，R是曲率半径。最小压力：$P_{min} = C(mgR/EA)^{3/2}$，C为几何常数。
</details>

**练习13.6**：分析触觉传感器采样率对滑动检测延迟的影响。给定滑动速度v=10mm/s，传感器分辨率δ=0.1mm，设计最优采样策略。

<details>
<summary>提示</summary>
考虑Nyquist采样定理和滑动特征频率
</details>

<details>
<summary>答案</summary>
滑动特征频率$f_s = v/δ = 100Hz$。根据Nyquist定理，采样率需>200Hz。考虑噪声和检测算法延迟，建议采样率500-1000Hz。可采用自适应采样：静态时低频(100Hz)，检测到运动迹象时提高到1kHz。
</details>

**练习13.7**：设计一个基于强化学习的抓取策略，定义状态空间、动作空间和奖励函数。

<details>
<summary>提示</summary>
考虑部分可观测性和稀疏奖励问题
</details>

<details>
<summary>答案</summary>
状态空间：点云特征(64维)+夹爪位姿(7维)+触觉读数(16维)。动作空间：离散化的抓取位姿(位置3维×角度3维)或连续控制。奖励函数：$r = 10 \cdot \mathbb{1}_{success} - 0.1t + 2 \cdot \mathbb{1}_{contact} - 5 \cdot \mathbb{1}_{collision}$。使用PPO或SAC算法，加入专家演示提高样本效率。
</details>

**练习13.8**：比较Ferrari-Canny指标与实际抓取成功率的相关性。设计实验方案验证两者关系。

<details>
<summary>提示</summary>
考虑不同物体形状、摩擦系数和扰动类型
</details>

<details>
<summary>答案</summary>
实验设计：1)选择10类物体，每类10个样本；2)对每个物体生成100个抓取，计算FC指标；3)在仿真和真机上测试，记录成功率；4)分析相关性。预期结果：FC指标与成功率正相关(r≈0.7)，但存在异常值(薄片、绳索等)。需要结合其他度量(如鲁棒性指标)综合评估。
</details>

## 常见陷阱与错误

### 理论分析陷阱

1. **过度依赖力闭合判断**
   - 错误：认为力闭合就能保证抓取成功
   - 正确：力闭合是必要非充分条件，还需考虑力的大小限制

2. **忽略摩擦系数不确定性**
   - 错误：使用材料表面理论摩擦系数
   - 正确：保守估计，考虑表面污染、磨损等因素

3. **点接触假设的局限**
   - 错误：所有分析基于点接触模型
   - 正确：软接触、面接触需要不同的分析方法

### 实现陷阱

4. **视觉定位误差累积**
   - 错误：完全依赖视觉定位执行抓取
   - 正确：加入触觉引导的闭环控制

5. **忽略动态效应**
   - 错误：静态分析结果直接用于快速抓取
   - 正确：考虑惯性力，降低速度或增加安全裕度

6. **数据集过拟合**
   - 错误：只在YCB上训练和测试
   - 正确：跨数据集验证，真实场景测试

### 系统集成陷阱

7. **传感器时间不同步**
   - 错误：直接融合不同频率的传感器数据
   - 正确：时间戳对齐，插值或缓存处理

8. **忽略计算延迟**
   - 错误：复杂算法导致控制延迟
   - 正确：平衡精度与实时性，考虑预测补偿

## 最佳实践检查清单

### 设计阶段

- [ ] **需求分析**
  - 明确抓取对象范围（尺寸、重量、材质）
  - 定义成功标准和失败模式
  - 确定实时性要求

- [ ] **传感器选择**
  - 视觉传感器分辨率满足定位精度
  - 考虑触觉传感器的必要性
  - 传感器冗余设计

- [ ] **执行器设计**
  - 夹爪开合范围覆盖所有物体
  - 力控制能力满足易碎品需求
  - 考虑多模态执行器（夹爪+吸盘）

### 算法开发

- [ ] **抓取分析**
  - 实现力闭合检测算法
  - 选择合适的质量度量
  - 包含鲁棒性分析

- [ ] **抓取综合**
  - 比较多种方法（解析/采样/学习）
  - 实现快速候选生成
  - 优化推理时间

- [ ] **失败处理**
  - 滑动检测与预防
  - 抓取失败后的恢复策略
  - 异常情况的安全响应

### 测试验证

- [ ] **仿真测试**
  - 物理参数扰动测试
  - 传感器噪声鲁棒性
  - 边界条件测试

- [ ] **标准数据集**
  - YCB基准测试
  - 跨数据集泛化测试
  - 与SOTA方法对比

- [ ] **真机验证**
  - 标定精度验证
  - 长时间运行稳定性
  - 实际成功率统计

### 部署优化

- [ ] **性能优化**
  - GPU加速关键模块
  - 算法并行化
  - 内存使用优化

- [ ] **系统集成**
  - 与机械臂控制系统集成
  - 安全监控和急停机制
  - 日志记录和故障诊断

- [ ] **持续改进**
  - 收集失败案例
  - 在线学习机制
  - 定期模型更新
